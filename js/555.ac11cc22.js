"use strict";(self["webpackChunkvue_default_ts"]=self["webpackChunkvue_default_ts"]||[]).push([[555],{555:function(e,t,i){i.r(t),i.d(t,{default:function(){return W}});var r,n,a,l,o,u,h=i(252),s=function(e){return(0,h.dD)("data-v-270969c6"),e=e(),(0,h.Cn)(),e},c=s((function(){return(0,h._)("canvas",{id:"canvas1"},null,-1)})),f=s((function(){return(0,h._)("img",{id:"playerImage",src:"resourses/sprites/scroller/player.png",alt:"player"},null,-1)})),b=s((function(){return(0,h._)("img",{id:"backgroundImage",src:"resourses/sprites/scroller/background.png",alt:"background"},null,-1)})),d=s((function(){return(0,h._)("img",{id:"enemyImage",src:"resourses/sprites/scroller/enemy.png",alt:"enemy"},null,-1)}));function m(e,t,i,r,n,a){return(0,h.wg)(),(0,h.iD)("div",null,[c,f,b,d,(0,h._)("button",{onClick:t[0]||(t[0]=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return e.toggleFullscreen&&e.toggleFullscreen.apply(e,t)}),id:"fullscreen"},"Toggle fullscreen")])}var g=[],w=0,y=0,p=0,v=!1,O=function(){return 1e3*Math.random()+1e3},P=function(e){return Boolean(l.keys.find((function(t){return e.includes(t)})))},j=["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],x=40,k=function(){function e(){Object.defineProperty(this,"keys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"touchY",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"touchTreshhold",{enumerable:!0,configurable:!0,writable:!0,value:30}),this.keys=[]}return Object.defineProperty(e.prototype,"addKeys",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.keys.push(e)}}),e}(),E=function(){function e(e,t){Object.defineProperty(this,"gameWidth",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"gameHeight",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:200}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:200}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:100}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:this.gameHeight-this.height}),Object.defineProperty(this,"image",{enumerable:!0,configurable:!0,writable:!0,value:document.getElementById("playerImage")}),Object.defineProperty(this,"frameX",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"frameY",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"maxFrame",{enumerable:!0,configurable:!0,writable:!0,value:8}),Object.defineProperty(this,"velocityX",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"velocityY",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"gravity",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"fps",{enumerable:!0,configurable:!0,writable:!0,value:20}),Object.defineProperty(this,"frameTimer",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"frameInterval",{enumerable:!0,configurable:!0,writable:!0,value:1e3/this.fps}),this.gameWidth=e,this.gameHeight=t}return Object.defineProperty(e.prototype,"draw",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.drawImage(this.image,this.width*this.frameX,this.height*this.frameY,this.width,this.height,this.x,this.y,this.width,this.height)}}),Object.defineProperty(e.prototype,"update",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i=this;g.forEach((function(e){var t=e.x+e.width/2-(i.x+i.width/2),r=e.y+e.height/2-(i.y+i.height/2),n=Math.sqrt(t*t+r*r);n<e.width/2+i.width/2&&(v=!0)})),this.frameTimer>this.frameInterval?(this.frameX>=this.maxFrame?this.frameX=0:this.frameX++,this.frameTimer=0):this.frameTimer+=t,e.keys.indexOf("ArrowRight")>-1?this.velocityX=5:e.keys.indexOf("ArrowLeft")>-1?this.velocityX=-5:this.velocityX=0,P(["ArrowUp","swipe up"])&&this.onGround()&&(this.velocityY=-32),this.x+=this.velocityX,this.x<0?this.x=0:this.x>this.gameWidth-this.width&&(this.x=this.gameWidth-this.width),this.y+=this.velocityY,this.onGround()?(this.velocityY=0,this.maxFrame=8,this.frameY=0):(this.velocityY+=this.gravity,this.maxFrame=6,this.frameY=1,this.frameX=0),this.y>this.gameHeight-this.height&&(this.y=this.gameHeight-this.height)}}),Object.defineProperty(e.prototype,"onGround",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.y>=this.gameHeight-this.height}}),Object.defineProperty(e.prototype,"restart",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.x=100,this.y=this.gameHeight-this.height,this.maxFrame=8,this.frameY=0,this.frameX=0}}),e}(),T=function(){function e(e,t){Object.defineProperty(this,"gameWidth",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"gameHeight",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"image",{enumerable:!0,configurable:!0,writable:!0,value:document.getElementById("backgroundImage")}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:2400}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:720}),Object.defineProperty(this,"velocityX",{enumerable:!0,configurable:!0,writable:!0,value:2}),this.gameWidth=e,this.gameHeight=t}return Object.defineProperty(e.prototype,"draw",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.drawImage(this.image,this.x,this.y,this.width,this.height),e.drawImage(this.image,this.x+this.width-1,this.y,this.width,this.height)}}),Object.defineProperty(e.prototype,"update",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.x-=this.velocityX,this.x<0-this.width+1&&(this.x=0)}}),Object.defineProperty(e.prototype,"restart",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.x=0}}),e}(),X=function(){function e(e,t){Object.defineProperty(this,"gameWidth",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"gameHeight",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:160}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:119}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:this.gameWidth}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:this.gameHeight-this.height}),Object.defineProperty(this,"frameX",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"frameY",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"velocityX",{enumerable:!0,configurable:!0,writable:!0,value:8}),Object.defineProperty(this,"maxFrame",{enumerable:!0,configurable:!0,writable:!0,value:5}),Object.defineProperty(this,"fps",{enumerable:!0,configurable:!0,writable:!0,value:20}),Object.defineProperty(this,"frameTimer",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"frameInterval",{enumerable:!0,configurable:!0,writable:!0,value:1e3/this.fps}),Object.defineProperty(this,"markForDelete",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"image",{enumerable:!0,configurable:!0,writable:!0,value:document.getElementById("enemyImage")}),this.gameWidth=e,this.gameHeight=t}return Object.defineProperty(e.prototype,"draw",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.drawImage(this.image,this.frameX*this.width,this.frameY,this.width,this.height,this.x,this.y,this.width,this.height)}}),Object.defineProperty(e.prototype,"update",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.frameTimer>this.frameInterval?(this.frameX>=this.maxFrame?this.frameX=0:this.frameX++,this.frameTimer=0):this.frameTimer+=e,this.x-=this.velocityX,this.x<-this.width&&(this.markForDelete=!0,p++)}}),e}();function F(e){y>O()?(g.push(new X(n.width,n.height)),y=0):y+=e,g.forEach((function(t){t.update(e),t.draw(a)})),g=g.filter((function(e){return!e.markForDelete}))}function I(e){e.textAlign="left",e.fillStyle="black",e.font="".concat(x,"px Helvetica"),e.fillText("Score ".concat(p),50,50)}function Y(e){var t=n.width/2,i=n.height/2;e.textAlign="center",e.fillStyle="black",e.fillText("Game over",t,i),e.fillText("Score ".concat(p),t,i+x),e.fillText("Press Enter or swipe down to restart",t,i+2*x),e.fillStyle="white",e.fillText("Game over",t+2,i),e.fillText("Score ".concat(p),t+2,i+40),e.fillText("Press Enter or swipe down to restart",t+2,i+2*x)}function H(){o.restart(),u.restart(),g=[],p=0,v=!1,L()}function L(e){void 0===e&&(e=0),console.log(e);var t=e-w;w=e,a.clearRect(0,0,n.width,n.height),u.update(),u.draw(a),F(t),o.update(l,t),o.draw(a),I(a),v?Y(a):r=requestAnimationFrame(L)}var A=(0,h.aZ)({mounted:function(){n=document.getElementById("canvas1"),a=n.getContext("2d"),n.width=800,n.height=720,window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup),window.addEventListener("touchstart",this.touchStart),window.addEventListener("touchmove",this.touchMove),window.addEventListener("touchend",this.touchEnd),l=new k,o=new E(n.width,n.height),u=new T(n.width,n.height),L()},methods:{keydown:function(e){j.includes(e.code)&&-1===l.keys.indexOf(e.code)&&l.addKeys(e.code),v&&"Enter"===e.code&&H(),"KeyF"===e.code&&this.toggleFullscreen()},keyup:function(e){j.includes(e.code)&&(l.keys=l.keys.filter((function(t){return t!==e.code})))},touchStart:function(e){l.touchY=e.changedTouches[0].pageY},touchMove:function(e){var t=e.changedTouches[0].pageY-l.touchY;t<-l.touchTreshhold&&-1===l.keys.indexOf("swipe up")?l.keys.push("swipe up"):t>l.touchTreshhold&&-1===l.keys.indexOf("swipe down")&&(l.keys.push("swipe down"),v&&H())},touchEnd:function(){console.log(l.keys),l.keys=l.keys.filter((function(e){return"swipe up"!==e})),l.keys=l.keys.filter((function(e){return"swipe down"!==e}))},toggleFullscreen:function(){document.fullscreenElement?document.exitFullscreen():n.requestFullscreen().catch((function(e){alert("Can't enable fullscreen mode. ".concat(e.message))}))}},unmounted:function(){window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup),window.removeEventListener("touchstart",this.touchStart),window.removeEventListener("touchmove",this.touchMove),window.removeEventListener("touchend",this.touchEnd),cancelAnimationFrame(r)}}),_=i(744);const S=(0,_.Z)(A,[["render",m],["__scopeId","data-v-270969c6"]]);var W=S}}]);
//# sourceMappingURL=555.ac11cc22.js.map