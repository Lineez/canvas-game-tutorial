{"version":3,"file":"js/744.8ecb27a1.js","mappings":"oLAEMA,EAAe,SAAAC,GAAK,OAAC,QAAa,mBAAmBA,EAAEA,KAAI,UAAcA,GACzEC,EAAa,CAAEC,MAAO,YACtBC,EAA2BJ,GAAa,WAAmB,WAAAK,GAAoB,QAAS,CAAEC,IAAK,cAAgB,qBAAsB,MACrIC,EAA2BP,GAAa,WAAmB,WAAAK,GAAoB,SAAU,CAAEG,GAAI,WAAa,MAAO,MAElH,SAASC,EAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,OAAQ,WAAc,QAAoB,OAAQ,KAAM,EACtD,IAAAV,GAAoB,MAAOH,EAAY,CACrCE,GACA,IAAAC,GAAoB,SAAU,CAC5BW,SAAUL,EAAO,KAAOA,EAAO,GAEvC,W,IAAC,sDAAY,OAACD,EAAKO,mBAAqBP,EAAKO,kBAAiB,MAAtBP,EAA0BQ,KAC1DV,GAAI,aACJW,KAAM,cACL,KAAM,MAEXZ,ICJG,SAASa,EACdC,EACAC,EACAC,GAEA,IAAMC,EAAmB,GAiBzB,OAfAH,EAAgBI,SAAQ,SAACC,EAAOC,GAK9B,IAJA,IAAMC,EAAS,CACbC,IAAK,IAGEC,EAAI,EAAGA,EAAIJ,EAAME,OAAQE,IAAK,CACrC,IAAMC,EAAOD,EAAIR,EACXU,EAAOL,EAAIJ,EAEjBK,EAAOC,IAAII,KAAK,CAAEC,EAAGH,EAAMI,EAAGH,IAGhCR,EAAiBE,EAAMP,MAAQS,KAG1BJ,EChCF,ICEHY,EDFSf,EAAoC,CAC/C,CACEF,KAAM,OACNS,OAAQ,GAEV,CACET,KAAM,OACNS,OAAQ,GAEV,CACET,KAAM,OACNS,OAAQ,GAEV,CACET,KAAM,MACNS,OAAQ,GAEV,CACET,KAAM,QACNS,OAAQ,IAEV,CACET,KAAM,MACNS,OAAQ,GAEV,CACET,KAAM,OACNS,OAAQ,GAEV,CACET,KAAM,OACNS,OAAQ,GAEV,CACET,KAAM,KACNS,OAAQ,IAEV,CACET,KAAM,SACNS,OAAQ,ICtCRS,EAAc,OAGlB,GAAe,QAAgB,CAC7BC,QAAS,CACPrB,kBAAA,SAAkBsB,GAChB,IAAMC,EAASD,EAAEC,OACjBH,EAAcG,EAAOC,QAGzBC,QAAA,WACE,IAAMC,EAASC,SAASC,eAAe,cAEjCC,EAAUzB,EAAgB0B,KAAI,SAACrB,GACnC,IAAMsB,EAAMJ,SAASK,cAAc,UAEnC,OADAD,EAAIP,MAAQO,EAAIE,YAAcxB,EAAMP,KAC7B6B,KAETL,EAAOQ,OAAM,MAAbR,EAAiBG,GAEjB,IAAMM,EAASR,SAASC,eAAe,WACjCQ,EAAMD,EAAOE,WAAW,MACxBC,EAAgBH,EAAOI,MAAQ,IAC/BC,EAAiBL,EAAOM,OAAS,IAEjCC,EAAc,IAAIC,MACxBD,EAAYE,IAAM,qCAClB,IAAMvC,EAAc,IACdC,EAAe,IACjBuC,EAAY,EACVC,EAAgB,EAChBvC,EAAmBJ,EACvBC,EACAC,EACAC,GAGF,SAASyC,IACPX,EAAIY,UAAU,EAAG,EAAGV,EAAcE,GAClC,IAAIS,EACFC,KAAKC,MAAMN,EAAYC,GACvBvC,EAAiBa,GAAaR,IAAIwC,OAChCC,EAAShD,EAAc4C,EACvBK,EAAS/C,EAAiBa,GAAaR,IAAIqC,GAAU/B,EAEzDkB,EAAImB,UACFb,EACAW,EACAC,EACAjD,EACAC,EACA,EACA,EACAD,EACAC,GAGFuC,IACA1B,EAAMqC,sBAAsBT,GAG9BA,KAEFU,UAAS,WACPC,qBAAqBvC,M,SC/DzB,MAAMwC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASnE,GAAQ,CAAC,YAAY,qBAEzF","sources":["webpack://vue-default-ts/./src/pages/SpriteAnimation.vue?82c7","webpack://vue-default-ts/./src/utils/utils.ts","webpack://vue-default-ts/./src/utils/library.ts","webpack://vue-default-ts/./src/pages/SpriteAnimation.vue?f4ae","webpack://vue-default-ts/./src/pages/SpriteAnimation.vue"],"sourcesContent":["import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-4373966c\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"controls\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { for: \"animations\" }, \"Choose Animation:\", -1))\nconst _hoisted_3 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"canvas\", { id: \"canvas1\" }, null, -1))\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"main\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _hoisted_2,\n      _createElementVNode(\"select\", {\n        onChange: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.selectPlayerState && _ctx.selectPlayerState(...args))),\n        id: \"animations\",\n        name: \"animations\"\n      }, null, 32)\n    ]),\n    _hoisted_3\n  ]))\n}","import { AnimationState } from \"@/utils/library\";\n\ninterface Location {\n  x: number;\n  y: number;\n}\n\ninterface SpriteAnimation {\n  [key: string]: Frames;\n}\n\ninterface Frames {\n  loc: Location[];\n}\n\nexport function mapSprites(\n  animationStates: AnimationState[],\n  spriteWidth: number,\n  spriteHeight: number\n) {\n  const spriteAnimations = {} as SpriteAnimation;\n\n  animationStates.forEach((state, i) => {\n    const frames = {\n      loc: [] as Location[],\n    };\n\n    for (let j = 0; j < state.frames; j++) {\n      const posX = j * spriteWidth;\n      const posY = i * spriteHeight;\n\n      frames.loc.push({ x: posX, y: posY });\n    }\n\n    spriteAnimations[state.name] = frames;\n  });\n\n  return spriteAnimations;\n}\n","export interface AnimationState {\n  name: string;\n  frames: number;\n}\n\nexport const animationStates: AnimationState[] = [\n  {\n    name: \"idle\",\n    frames: 7,\n  },\n  {\n    name: \"jump\",\n    frames: 7,\n  },\n  {\n    name: \"fall\",\n    frames: 7,\n  },\n  {\n    name: \"run\",\n    frames: 9,\n  },\n  {\n    name: \"dizzy\",\n    frames: 11,\n  },\n  {\n    name: \"sit\",\n    frames: 5,\n  },\n  {\n    name: \"roll\",\n    frames: 7,\n  },\n  {\n    name: \"bite\",\n    frames: 7,\n  },\n  {\n    name: \"ko\",\n    frames: 12,\n  },\n  {\n    name: \"getHit\",\n    frames: 4,\n  },\n];\n","\nimport { defineComponent } from \"vue\";\n\nimport { mapSprites } from \"@/utils/utils\";\nimport { animationStates } from \"@/utils/library\";\n\nlet playerState = \"idle\";\nlet raf: number;\n\nexport default defineComponent({\n  methods: {\n    selectPlayerState(e: Event) {\n      const target = e.target as HTMLSelectElement;\n      playerState = target.value;\n    },\n  },\n  mounted() {\n    const select = document.getElementById(\"animations\") as HTMLDivElement;\n\n    const options = animationStates.map((state) => {\n      const opt = document.createElement(\"option\");\n      opt.value = opt.textContent = state.name;\n      return opt;\n    });\n    select.append(...options);\n\n    const canvas = document.getElementById(\"canvas1\") as HTMLCanvasElement;\n    const ctx = canvas.getContext(\"2d\") as CanvasRenderingContext2D;\n    const CANVAS_WIDTH = (canvas.width = 600);\n    const CANVAS_HEIGHT = (canvas.height = 600);\n\n    const playerImage = new Image();\n    playerImage.src = \"./resourses/sprites/shadow_dog.png\";\n    const spriteWidth = 575;\n    const spriteHeight = 523;\n    let gameFrame = 0;\n    const staggerFrames = 5;\n    const spriteAnimations = mapSprites(\n      animationStates,\n      spriteWidth,\n      spriteHeight\n    );\n\n    function animate() {\n      ctx.clearRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);\n      let position =\n        Math.floor(gameFrame / staggerFrames) %\n        spriteAnimations[playerState].loc.length;\n      let frameX = spriteWidth * position;\n      let frameY = spriteAnimations[playerState].loc[position].y;\n\n      ctx.drawImage(\n        playerImage,\n        frameX,\n        frameY,\n        spriteWidth,\n        spriteHeight,\n        0,\n        0,\n        spriteWidth,\n        spriteHeight\n      );\n\n      gameFrame++;\n      raf = requestAnimationFrame(animate);\n    }\n\n    animate();\n  },\n  unmounted() {\n    cancelAnimationFrame(raf);\n  },\n});\n","import { render } from \"./SpriteAnimation.vue?vue&type=template&id=4373966c&scoped=true&ts=true\"\nimport script from \"./SpriteAnimation.vue?vue&type=script&lang=ts\"\nexport * from \"./SpriteAnimation.vue?vue&type=script&lang=ts\"\n\nimport \"./SpriteAnimation.vue?vue&type=style&index=0&id=4373966c&lang=scss&scoped=true\"\n\nimport exportComponent from \"/home/runner/work/canvas-game-tutorial/canvas-game-tutorial/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4373966c\"]])\n\nexport default __exports__"],"names":["_withScopeId","n","_hoisted_1","class","_hoisted_2","_","for","_hoisted_3","id","render","_ctx","_cache","$props","$setup","$data","$options","onChange","selectPlayerState","args","name","mapSprites","animationStates","spriteWidth","spriteHeight","spriteAnimations","forEach","state","i","frames","loc","j","posX","posY","push","x","y","raf","playerState","methods","e","target","value","mounted","select","document","getElementById","options","map","opt","createElement","textContent","append","canvas","ctx","getContext","CANVAS_WIDTH","width","CANVAS_HEIGHT","height","playerImage","Image","src","gameFrame","staggerFrames","animate","clearRect","position","Math","floor","length","frameX","frameY","drawImage","requestAnimationFrame","unmounted","cancelAnimationFrame","__exports__"],"sourceRoot":""}