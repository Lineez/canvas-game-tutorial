{"version":3,"file":"js/555.ac11cc22.js","mappings":"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","sources":["webpack://vue-default-ts/./src/pages/ScrollerGame.vue?9732","webpack://vue-default-ts/./src/pages/ScrollerGame.vue?df75","webpack://vue-default-ts/./src/pages/ScrollerGame.vue"],"sourcesContent":["\nimport { defineComponent } from \"vue\";\n\nlet raf: number;\nlet canvas: HTMLCanvasElement;\nlet ctx: CanvasRenderingContext2D;\nlet input: InputHandler;\nlet player: Player;\nlet background: Background;\nlet enemies: Enemy[] = [];\n\nlet lastTime = 0;\nlet enemyTimer = 0;\nlet score = 0;\nlet gameOver = false;\nconst randomEnemyInterval = () => Math.random() * 1000 + 1000;\nconst isKeyInKeys = (arr: string[]): boolean => {\n  return Boolean(input.keys.find((key) => arr.includes(key)));\n};\n\nconst inputKeysMap = [\"ArrowDown\", \"ArrowUp\", \"ArrowLeft\", \"ArrowRight\"];\nconst fontSize = 40;\n\nclass InputHandler {\n  keys: string[];\n  touchY = 0;\n  touchTreshhold = 30;\n\n  constructor() {\n    this.keys = [];\n  }\n\n  addKeys(value: string) {\n    this.keys.push(value);\n  }\n}\n\nclass Player {\n  width = 200;\n  height = 200;\n  x = 100;\n  y = this.gameHeight - this.height;\n  image = document.getElementById(\"playerImage\") as HTMLImageElement;\n  frameX = 0;\n  frameY = 0;\n  maxFrame = 8;\n  velocityX = 0;\n  velocityY = 0;\n  gravity = 1;\n  fps = 20;\n  frameTimer = 0;\n  frameInterval = 1000 / this.fps;\n\n  constructor(public gameWidth: number, public gameHeight: number) {\n    this.gameWidth = gameWidth;\n    this.gameHeight = gameHeight;\n  }\n\n  draw(ctx: CanvasRenderingContext2D) {\n    ctx.drawImage(\n      this.image,\n      this.width * this.frameX,\n      this.height * this.frameY,\n      this.width,\n      this.height,\n      this.x,\n      this.y,\n      this.width,\n      this.height\n    );\n  }\n\n  update(input: InputHandler, deltaTime: number) {\n    // collision detect\n    enemies.forEach((enemy) => {\n      const dx = enemy.x + enemy.width / 2 - (this.x + this.width / 2);\n      const dy = enemy.y + enemy.height / 2 - (this.y + this.height / 2);\n      const distance = Math.sqrt(dx * dx + dy * dy);\n      if (distance < enemy.width / 2 + this.width / 2) {\n        gameOver = true;\n      }\n    });\n    // sprite animation\n    if (this.frameTimer > this.frameInterval) {\n      if (this.frameX >= this.maxFrame) this.frameX = 0;\n      else this.frameX++;\n      this.frameTimer = 0;\n    } else {\n      this.frameTimer += deltaTime;\n    }\n\n    // controls\n    if (input.keys.indexOf(\"ArrowRight\") > -1) {\n      this.velocityX = 5;\n    } else if (input.keys.indexOf(\"ArrowLeft\") > -1) {\n      this.velocityX = -5;\n    } else {\n      this.velocityX = 0;\n    }\n\n    if (isKeyInKeys([\"ArrowUp\", \"swipe up\"]) && this.onGround()) {\n      this.velocityY = -32;\n    }\n\n    // horizontal movement\n    this.x += this.velocityX;\n\n    if (this.x < 0) this.x = 0;\n    else if (this.x > this.gameWidth - this.width) {\n      this.x = this.gameWidth - this.width;\n    }\n\n    // vertical movement\n    this.y += this.velocityY;\n\n    if (!this.onGround()) {\n      this.velocityY += this.gravity;\n      this.maxFrame = 6;\n      this.frameY = 1;\n      this.frameX = 0;\n    } else {\n      this.velocityY = 0;\n      this.maxFrame = 8;\n      this.frameY = 0;\n    }\n\n    if (this.y > this.gameHeight - this.height) {\n      this.y = this.gameHeight - this.height;\n    }\n  }\n  private onGround() {\n    return this.y >= this.gameHeight - this.height;\n  }\n  restart() {\n    this.x = 100;\n    this.y = this.gameHeight - this.height;\n    this.maxFrame = 8;\n    this.frameY = 0;\n    this.frameX = 0;\n  }\n}\n\nclass Background {\n  image = document.getElementById(\"backgroundImage\") as HTMLImageElement;\n  x = 0;\n  y = 0;\n  width = 2400;\n  height = 720;\n  velocityX = 2;\n\n  constructor(public gameWidth: number, public gameHeight: number) {\n    this.gameWidth = gameWidth;\n    this.gameHeight = gameHeight;\n  }\n\n  draw(ctx: CanvasRenderingContext2D) {\n    ctx.drawImage(this.image, this.x, this.y, this.width, this.height);\n    ctx.drawImage(\n      this.image,\n      this.x + this.width - 1,\n      this.y,\n      this.width,\n      this.height\n    );\n  }\n  update() {\n    this.x -= this.velocityX;\n    if (this.x < 0 - this.width + 1) this.x = 0;\n  }\n  restart() {\n    this.x = 0;\n  }\n}\n\nclass Enemy {\n  width = 160;\n  height = 119;\n  x = this.gameWidth;\n  y = this.gameHeight - this.height;\n  frameX = 0;\n  frameY = 0;\n  velocityX = 8;\n  maxFrame = 5;\n  fps = 20;\n  frameTimer = 0;\n  frameInterval = 1000 / this.fps;\n  markForDelete = false;\n  image = document.getElementById(\"enemyImage\") as HTMLImageElement;\n\n  constructor(public gameWidth: number, public gameHeight: number) {\n    this.gameWidth = gameWidth;\n    this.gameHeight = gameHeight;\n  }\n\n  draw(ctx: CanvasRenderingContext2D) {\n    ctx.drawImage(\n      this.image,\n      this.frameX * this.width,\n      this.frameY,\n      this.width,\n      this.height,\n      this.x,\n      this.y,\n      this.width,\n      this.height\n    );\n  }\n\n  update(deltaTime: number) {\n    if (this.frameTimer > this.frameInterval) {\n      if (this.frameX >= this.maxFrame) this.frameX = 0;\n      else this.frameX++;\n      this.frameTimer = 0;\n    } else {\n      this.frameTimer += deltaTime;\n    }\n    this.x -= this.velocityX;\n\n    if (this.x < -this.width) {\n      this.markForDelete = true;\n      score++;\n    }\n  }\n}\n\nfunction handleEnemies(deltaTime: number) {\n  if (enemyTimer > randomEnemyInterval()) {\n    enemies.push(new Enemy(canvas.width, canvas.height));\n    enemyTimer = 0;\n  } else {\n    enemyTimer += deltaTime;\n  }\n  // add new ENEMY\n  enemies.forEach((enemy) => {\n    enemy.update(deltaTime);\n    enemy.draw(ctx);\n  });\n  // remove ENEMY if out of screen\n  enemies = enemies.filter((enemy) => !enemy.markForDelete);\n}\n\nfunction displayScore(ctx: CanvasRenderingContext2D) {\n  ctx.textAlign = \"left\";\n  ctx.fillStyle = \"black\";\n  ctx.font = `${fontSize}px Helvetica`;\n  ctx.fillText(`Score ${score}`, 50, 50);\n}\n\nfunction displayStatusText(ctx: CanvasRenderingContext2D) {\n  const widthCenter = canvas.width / 2;\n  const heightCenter = canvas.height / 2;\n\n  ctx.textAlign = \"center\";\n  // shadow\n  ctx.fillStyle = \"black\";\n  ctx.fillText(\"Game over\", widthCenter, heightCenter);\n  ctx.fillText(`Score ${score}`, widthCenter, heightCenter + fontSize);\n  ctx.fillText(\n    \"Press Enter or swipe down to restart\",\n    widthCenter,\n    heightCenter + fontSize * 2\n  );\n  // text\n  ctx.fillStyle = \"white\";\n  ctx.fillText(\"Game over\", widthCenter + 2, heightCenter);\n  ctx.fillText(`Score ${score}`, widthCenter + 2, heightCenter + 40);\n  ctx.fillText(\n    \"Press Enter or swipe down to restart\",\n    widthCenter + 2,\n    heightCenter + fontSize * 2\n  );\n}\n\nfunction restart() {\n  player.restart();\n  background.restart();\n  enemies = [];\n  score = 0;\n  gameOver = false;\n  animate();\n}\n\nfunction animate(timestamp = 0) {\n  console.log(timestamp);\n  const deltaTime = timestamp - lastTime;\n  lastTime = timestamp;\n\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n  background.update();\n  background.draw(ctx);\n  handleEnemies(deltaTime);\n\n  player.update(input, deltaTime);\n  player.draw(ctx);\n\n  displayScore(ctx);\n\n  if (!gameOver) {\n    raf = requestAnimationFrame(animate);\n  } else {\n    displayStatusText(ctx);\n  }\n}\n\nexport default defineComponent({\n  mounted() {\n    canvas = document.getElementById(\"canvas1\") as HTMLCanvasElement;\n    ctx = canvas.getContext(\"2d\") as CanvasRenderingContext2D;\n    canvas.width = 800;\n    canvas.height = 720;\n\n    window.addEventListener(\"keydown\", this.keydown);\n    window.addEventListener(\"keyup\", this.keyup);\n    window.addEventListener(\"touchstart\", this.touchStart);\n    window.addEventListener(\"touchmove\", this.touchMove);\n    window.addEventListener(\"touchend\", this.touchEnd);\n\n    input = new InputHandler();\n    player = new Player(canvas.width, canvas.height);\n    background = new Background(canvas.width, canvas.height);\n\n    animate();\n  },\n  methods: {\n    keydown(e: KeyboardEvent) {\n      if (inputKeysMap.includes(e.code) && input.keys.indexOf(e.code) === -1) {\n        input.addKeys(e.code);\n      }\n      if (gameOver && e.code === \"Enter\") restart();\n      if (e.code === \"KeyF\") this.toggleFullscreen();\n    },\n    keyup(e: KeyboardEvent) {\n      if (inputKeysMap.includes(e.code)) {\n        input.keys = input.keys.filter((key) => key !== e.code);\n      }\n    },\n    touchStart(e: TouchEvent) {\n      input.touchY = e.changedTouches[0].pageY;\n    },\n    touchMove(e: TouchEvent) {\n      const swipeDistance = e.changedTouches[0].pageY - input.touchY;\n      if (\n        swipeDistance < -input.touchTreshhold &&\n        input.keys.indexOf(\"swipe up\") === -1\n      ) {\n        input.keys.push(\"swipe up\");\n      } else if (\n        swipeDistance > input.touchTreshhold &&\n        input.keys.indexOf(\"swipe down\") === -1\n      ) {\n        input.keys.push(\"swipe down\");\n        if (gameOver) restart();\n      }\n    },\n    touchEnd() {\n      console.log(input.keys);\n      input.keys = input.keys.filter((key) => key !== \"swipe up\");\n      input.keys = input.keys.filter((key) => key !== \"swipe down\");\n      // input.keys.splice(input.keys.indexOf(\"swipe up\"), 1);\n      // input.keys.splice(input.keys.indexOf(\"swipe down\"), 1);\n    },\n    toggleFullscreen() {\n      if (!document.fullscreenElement) {\n        canvas.requestFullscreen().catch((err) => {\n          alert(`Can't enable fullscreen mode. ${err.message}`);\n        });\n      } else {\n        document.exitFullscreen();\n      }\n    },\n  },\n  unmounted() {\n    window.removeEventListener(\"keydown\", this.keydown);\n    window.removeEventListener(\"keyup\", this.keyup);\n    window.removeEventListener(\"touchstart\", this.touchStart);\n    window.removeEventListener(\"touchmove\", this.touchMove);\n    window.removeEventListener(\"touchend\", this.touchEnd);\n    cancelAnimationFrame(raf);\n  },\n});\n","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-270969c6\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"canvas\", { id: \"canvas1\" }, null, -1))\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  id: \"playerImage\",\n  src: \"resourses/sprites/scroller/player.png\",\n  alt: \"player\"\n}, null, -1))\nconst _hoisted_3 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  id: \"backgroundImage\",\n  src: \"resourses/sprites/scroller/background.png\",\n  alt: \"background\"\n}, null, -1))\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  id: \"enemyImage\",\n  src: \"resourses/sprites/scroller/enemy.png\",\n  alt: \"enemy\"\n}, null, -1))\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _hoisted_1,\n    _hoisted_2,\n    _hoisted_3,\n    _hoisted_4,\n    _createElementVNode(\"button\", {\n      onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.toggleFullscreen && _ctx.toggleFullscreen(...args))),\n      id: \"fullscreen\"\n    }, \"Toggle fullscreen\")\n  ]))\n}","import { render } from \"./ScrollerGame.vue?vue&type=template&id=270969c6&scoped=true&ts=true\"\nimport script from \"./ScrollerGame.vue?vue&type=script&lang=ts\"\nexport * from \"./ScrollerGame.vue?vue&type=script&lang=ts\"\n\nimport \"./ScrollerGame.vue?vue&type=style&index=0&id=270969c6&lang=scss&scoped=true\"\n\nimport exportComponent from \"/home/runner/work/canvas-game-tutorial/canvas-game-tutorial/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-270969c6\"]])\n\nexport default __exports__"],"names":["raf","canvas","ctx","input","player","background","_withScopeId","n","_hoisted_1","_","id","_hoisted_2","src","alt","_hoisted_3","_hoisted_4","render","_ctx","_cache","$props","$setup","$data","$options","onClick","toggleFullscreen","args","enemies","lastTime","enemyTimer","score","gameOver","randomEnemyInterval","Math","random","isKeyInKeys","arr","Boolean","keys","find","key","includes","inputKeysMap","fontSize","this","value","push","gameWidth","gameHeight","height","document","getElementById","fps","drawImage","image","width","frameX","frameY","x","y","deltaTime","forEach","enemy","dx","dy","distance","sqrt","frameTimer","frameInterval","maxFrame","indexOf","velocityX","onGround","velocityY","gravity","markForDelete","handleEnemies","Enemy","update","draw","filter","displayScore","textAlign","fillStyle","font","fillText","displayStatusText","widthCenter","heightCenter","restart","animate","timestamp","console","log","clearRect","requestAnimationFrame","mounted","getContext","window","addEventListener","keydown","keyup","touchStart","touchMove","touchEnd","InputHandler","Player","Background","methods","e","code","addKeys","touchY","changedTouches","pageY","swipeDistance","touchTreshhold","fullscreenElement","exitFullscreen","requestFullscreen","catch","err","alert","message","unmounted","removeEventListener","cancelAnimationFrame","__exports__"],"sourceRoot":""}